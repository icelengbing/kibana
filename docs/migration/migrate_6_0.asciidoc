[[breaking-changes-6.0]]
== 版本 6.0 中的重要更新

本节讨论当你的应用需要迁移到 kibana 6.0 时需要注意的一些改变。


[float]
=== 不能再继续使用不支持的脚本语言
*说明：* Kibana 5.x 允许用户使用 Elasticsearch 支持的任何脚本语言创建脚本化的字段。
而 Kibana 6.0 将只支持基于 Painless 和 Lucene 表达式的脚本。


*影响：* 你需要迁移你用 groovy、python、javascript 等脚本创建的字段，将其修改为 Painless 或者 Lucene 的表达式。


[float]
=== 修改了状态 API 的响应格式
*说明：* 为了使风格具有一致性，并提供易于理解的响应，
状态 API 做了如下修改：

* 属性的名称现在已经使用了 snake case 命名法（名称如果是复合词或者包含短语，各个单词之间用下划线分割，不能有空格），部分属性名称已经做了修改
* 指标现在提供最新的可用数据，而不是随着时间变化的采样

*影响：* 你需要更新使用了状态 API 的地方。


[float]
=== Timelion 中需要使用逗号来分割多个查询
*说明：* Kibana 5.x 的 timelion 中，用户可以使用空格作为查询的分隔符，例如： `.es(400) .es(500)` ，
现在只有逗号才能作为有效的查询分隔符。例如： `.es(400), .es(500)`

*影响：* 你需要使用新的语法重写 timelion 中存储的查询。


[float]
=== 需要64位操作系统
*说明：* Kibana 6.0.0 及以后版本只支持64位的操作系统。

*影响：* 你需要在64位的操作系统上安装 Kibana 6.x 。 不过，当从32位操作系统向64位操作系统迁移时，不需要额外的数据迁移步骤。


[float]
=== NODE_ENV 环境变量不再影响 Kibana
*说明：* 设置 NODE_ENV 环境变量有可能会以意想不到的方式中断 Kibana 进程，不幸的是，它往往是系统中的常见设置，你不会希望它导致 Kibana 出现任何异常。 所以，现在 kibana 将会完全忽略 NODE_ENV 环境变量的设置。

*影响：* 如果你正在开发一个依赖于 NODE_ENV 环境变量的定制化插件，你需要将其更新为依赖另外一个不同名称的的环境变量。


[float]
=== 使用 `_` 而不是 `.` 的 Kibana 4.x 方式的配置名命名方式已被删除
*说明：* 在 Kibana 4.2 中，我们使用 `.` 字符作为分隔符替换 `_` 字符，重命名了配置文件 kibana.yml 中的所有配置名称，传统方式的配置依然是可以正常工作的。在 5.0 版本中，当遇到传统配置时我们开始记录过期申明。 在 6.0 及其以后版本中，这些使用下划线而不是 `.` 字符的旧配置名称将不再起作用。

*影响：* kibana.yml 配置中任何使用下划线字符分割配置名称的地方，都需要更新为当前版本支持的用法。具体用法请参考 <<settings,Configuring Kibana>> 章节。
